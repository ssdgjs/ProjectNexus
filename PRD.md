# 产品需求文档：Project Nexus —— AI原生分布式组织操作系统

| 文档属性 | 内容 |
| --- | --- |
| **产品名称** | Project Nexus |
| **版本号** | v1.0 MVP |
| **核心理念** | 去中心化、任务原子化、算法调度、全员节点化 |
| **目标用户** | AI原生创业公司、去中心化社区、松散耦合的极客团队 |
| **文档状态** | 已定稿 |
| **更新日期** | 2025-02-07 |

---

## 1. 项目背景与愿景

### 1.1 背景

传统的科层制公司（1.0模式）在AI时代面临决策迟缓、信息传导失真、管理成本高昂等问题。基于"分布式先锋队"理论，未来的组织应当是去中心化的，利用AI作为调度中枢，将人类员工和AI Agent视为平等的"工作节点"。

### 1.2 产品愿景

构建一个"无管理者"的操作系统。系统即老板，算法即管理。
通过将宏观战略自动拆解为原子任务，以"滴滴打人"的模式分发给最合适的节点（人或AI），实现**"流动的组织，固化的能力"**。

### 1.3 核心价值假设

**任务化的组织方式比传统管理更高效**

---

## 2. 核心逻辑架构

系统由四大引擎构成：

| 引擎 | 名称 | 职责 |
|------|------|------|
| 分解引擎 | The Prism | 将战略目标拆解为可执行的模块 |
| 调度引擎 | The Dispatcher | 基于能力匹配任务给最优节点 |
| 共识引擎 | The Ledger | 记录工作量证明，结算Token |
| 连接引擎 | The Strand | 知识的沉淀与复用 |

---

## 3. 用户角色

### 3.1 MVP 角色定义

| 角色 | 职责 |
|------|------|
| **指挥官** | 最高决策者，设定战略目标，验收任务，调整信誉分 |
| **节点** | 任务承接和执行者 |

### 3.2 未来角色扩展（Phase 1.5+）

| 角色 | 职责 |
|------|------|
| 总指挥 | 最终决策、冲突仲裁、紧急干预 |
| 战略官 | 做什么/不做什么、里程碑 |
| 技术官 | 技术方案、质量标准、验收 |
| 人才官 | 节点管理、信誉规则、奖惩 |
| 交付官 | 任务拆解、派发策略、进度 |

---

## 4. 决策机制

### 4.1 阶段性演进

```
Phase 1 (MVP)                    Phase 1.5                       Phase 2
┌────────────────┐               ┌────────────────┐              ┌────────────────┐
│  单指挥官      │               │  5席位制       │              │  指挥官+Agent  │
│  + Agent助手   │    ──▶        │  总指挥最终决策 │    ──▶       │  Agent学习并  │
│  (占位)        │               │  先民主后集中  │              │  逐步接管     │
└────────────────┘               └────────────────┘              └────────────────┘
```

### 4.2 MVP 决策模式

| 角色 | 职责 |
|------|------|
| 指挥官 | 所有决策的最终拍板人 |
| Agent 助手 | 提供建议（占位），记录指挥官决策，积累学习数据 |

---

## 5. 任务拆解机制

### 5.1 拆解原则

| 原则 | 说明 |
|------|------|
| 按业务流程拆分 | 而非按职能拆分 |
| 端到端交付 | 从需求到上线，像一个公司交付项目 |
| 模块规模 | 1个月左右（参考Vibe Coding） |

### 5.2 拆解流程

```
┌─────────────────────────────────────────────────────────────┐
│                    模块拆解流程                              │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│   1. 指挥官输入项目需求                                      │
│          │                                                  │
│          ▼                                                  │
│   2. [占位] Agent 生成拆解建议                              │
│          │                                                  │
│          ▼                                                  │
│   3. 指挥官审核、调整、确认模块划分                         │
│          │                                                  │
│          ▼                                                  │
│   4. 生成模块任务池，进入派发环节                           │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 5.3 项目输入字段

| 字段 | 是否必填 |
|------|---------|
| 项目名称 | ✅ |
| 项目背景/目标描述 | ⬜ |
| 目标用户/场景 | ⬜ |
| 参考类似项目 | ⬜ |
| 特殊约束 | ⬜ |

### 5.4 拆解错误处理

| 状况 | 处理方式 |
|------|---------|
| 拆解不合理被发现 | 重新拆解（车会重来） |

---

## 6. 任务派发机制

### 6.1 派发模式

| 模式 | 说明 |
|------|------|
| 纯抢单 | 线上只做记录，不做撮合。线下沟通后线上确认承接 |

### 6.2 派发规则

| 规则 | 说明 |
|------|------|
| 没人接单 | 放着，不处理 |
| 并发限制 | 每个节点最多同时承接3个模块 |
| 任务转让 | 不允许 |

### 6.3 任务放弃

| 操作 | 条件 |
|------|------|
| 放弃任务 | 需要指挥官审批 |

---

## 7. 多人协作

| 项目 | 规则 |
|------|------|
| 最大承接人数 | 5人/模块 |
| 分数分配 | 指挥官手动分配 |
| 求助机制 | MVP暂线下求助，未来扩展 |

---

## 8. 验收机制

### 8.1 验收流程

```
┌─────────────────────────────────────────────────────────────┐
│                      验收决策流程                            │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│                    节点提交交付物                            │
│                             │                               │
│                             ▼                               │
│                    ┌─────────────────┐                     │
│                    │   指挥官验收     │                     │
│                    └─────────────────┘                     │
│                             │                               │
│            ┌────────────────┼────────────────┐              │
│            ▼                ▼                ▼              │
│      ┌───────────┐   ┌───────────┐   ┌───────────┐         │
│      │   通过    │   │  不通过   │   │   关闭    │         │
│      │   结算    │   │  整改意见 │   │  丢弃任务 │         │
│      └───────────┘   └───────────┘   └───────────┘         │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 8.2 验收标准

| 项目 | 说明 |
|------|------|
| 定义者 | 指挥官 |
| 方式 | 人工判断（MVP阶段） |

### 8.3 返工成本

| 成本类型 | 承担方 |
|---------|-------|
| 额外时间成本 | 指挥官承担 |
| 机会成本 | 指挥官承担 |

### 8.4 任务关闭处理

| 处理项 | 规则 |
|--------|------|
| 已完成工作 | 作为附件上传保存 |
| 影响信誉分 | 不影响 |

---

## 9. 信誉分体系

### 9.1 构成

| 维度 | 说明 |
|------|------|
| 类型 | 综合分，不区分维度 |
| 计算方式 | 指挥官主观评分 |
| 初始值 | 100 |

### 9.2 用途

| 用途 | MVP 阶段 |
|------|---------|
| 接单优先级 | ❌ 不使用 |
| 单价加成 | ❌ 不使用 |
| 排行榜展示 | ✅ 所有人可见 |

---

## 10. 失败处理

### 10.1 任务超时

| 处理方式 | 说明 |
|---------|------|
| 超时显示 | UI上显性展示"已超时"状态 |
| 自动取消 | 不自动取消 |

### 10.2 节点失联

| 功能 | MVP 阶段 |
|------|---------|
| 失联检测 | 暂不考虑，后续补充IM功能 |

---

## 11. 知识沉淀机制

### 11.1 支持的类型

| 类型 | 说明 |
|------|------|
| 文件类型 | zip、md文档、图片等 |
| 智能体 | 以skill或zip方式注册 |

### 11.2 知识库权限

| 操作 | 权限 |
|------|------|
| 上传 | 所有用户 |
| 删除 | 自己上传的 + 指挥官可删除所有 |
| 下载 | 所有用户可下载所有知识 |
| 展示 | 无限延伸的卡片视图 |

### 11.3 知识关联

| 操作 | 方式 |
|------|------|
| 知识关联 | 节点做任务时手动选择关联知识 |

### 11.4 文件限制

| 限制 | 值 |
|------|-----|
| 单个文件大小 | ≤30MB |

---

## 12. 智能体/Skills机制

### 12.1 智能体发现

| 方式 | MVP 阶段 |
|------|---------|
| 知识库浏览 | ✅ |
| 搜索功能（按名称/标签） | ✅ |
| 推荐展示 | ✅ |

### 12.2 调用方式

| 方式 | MVP 阶段 |
|------|---------|
| 下载智能体代码/配置，本地运行 | ✅ |

### 12.3 调用记录

| 记录项 | 说明 |
|--------|------|
| 调用者 | 谁调用的 |
| 被调用的智能体 | 哪个智能体 |
| 调用时间 | 何时调用 |
| 调用次数 | 统计 |

### 12.4 贡献度计算

| 方式 | MVP 阶段 |
|------|---------|
| 按调用次数累积积分 | ✅ |

---

## 13. AI 节点定位

### 13.1 当前定位

| 定位 | 说明 |
|------|------|
| 角色 | 人类节点的助手 |
| 未来演进 | 人—AI—AI—人的链路 |

### 13.2 贡献度记录

| 场景 | 归属方式 |
|------|---------|
| 人类独立完成 | 100%归人类 |
| 人类+通用AI工具 | 100%归人类（AI是基础设施） |
| 人类+自己部署的Agent | 人类+Agent统筹考虑 |

---

## 14. 通知机制

### 14.1 通知事件

| 事件 | 通知给 |
|------|-------|
| 新模块发布 | 所有节点 |
| 有人抢单 | 指挥官 |
| 交付物提交 | 指挥官 |
| 验收结果（通过/不通过） | 承接该模块的节点 |
| 任务关闭 | 承接该模块的节点 |
| 任务超时 | 承接该模块的节点 + 指挥官 |
| 放弃任务申请 | 指挥官 |
| 信誉分变化 | 被评分的节点 |
| 新知识上传 | 所有用户 |

### 14.2 通知方式

| 方式 | MVP 阶段 |
|------|---------|
| 站内消息（通知中心） | ✅ |
| 邮件 | ❌ |
| 实时推送 | ❌ |

### 14.3 强制通知

| 事件 | 类型 |
|------|------|
| 交付物提交 | 强制 |
| 验收结果 | 强制 |
| 任务关闭 | 强制 |
| 其他 | 普通 |

---

## 15. 权限系统

### 15.1 操作权限

| 操作 | 指挥官 | 节点 |
|------|-------|------|
| 创建项目 | ✅ | ❌ |
| 编辑项目 | ✅ | ❌ |
| 删除项目 | ✅ | ❌ |
| 创建模块 | ✅ | ❌ |
| 编辑模块 | ✅ | ❌ |
| 删除模块 | ✅ | ❌ |
| 抢单/承接模块 | ❌ | ✅ |
| 提交交付物 | ❌ | ✅ |
| 验收模块 | ✅ | ❌ |
| 调整信誉分 | ✅ | ❌ |
| 上传知识 | ✅ | ✅ |
| 删除自己的知识 | ✅ | ✅ |
| 删除他人知识 | ✅ | ❌ |
| 放弃任务（申请） | ❌ | ✅ |
| 审批放弃任务 | ✅ | ❌ |

### 15.2 数据可见性

| 数据 | 指挥官 | 节点 |
|------|-------|------|
| 所有项目 | ✅ | ✅ |
| 所有模块 | ✅ | ✅ |
| 所有交付物 | ✅ | ✅ |
| 所有节点信誉分 | ✅ | ✅ |
| 其他人承接的模块详情 | ✅ | ✅ |
| 他人上传的知识 | ✅ | ✅ |
| 智能体调用记录 | ✅ | ✅ |
| 排行榜 | ✅ | ✅ |

### 15.3 节点间隔离

| 规则 | 决策 |
|------|------|
| 数据隔离 | 不隔离，节点间数据透明 |

---

## 16. UI/UX设计

### 16.1 核心页面

| 页面 | 优先级 |
|------|-------|
| 仪表盘/首页 | P0 |
| 项目详情页 | P0 |
| 模块详情页 | P0 |
| 知识库页 | P0 |
| 节点排行榜 | P1 |
| 个人中心 | P1 |

### 16.2 设计规范

| 项目 | 说明 |
|------|------|
| 设计系统 | Lingjing Core Brand System (AI Edition) |
| 配色 | 双色 |
| 响应式 | ✅ |
| PC端 | ✅ |
| 移动端 | ✅ |

### 16.3 模块卡片信息

| 信息项 | 必需 |
|--------|------|
| 模块名称 | ✅ |
| 所属项目 | ✅ |
| 预估工时 | ✅ |
| 赏金 | ✅ |
| 承接人 | ✅ |
| 状态 | ✅ |
| 超时状态 | ✅ |
| 截止日期 | ✅ |

---

## 17. 数据结构

### 17.1 核心数据表

```
┌─────────────────────────────────────────────────────────────┐
│                        核心数据结构                          │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  1. Users (用户/节点)                                       │
│     - user_id, name, password, role, reputation_score      │
│     - current_tasks_count (用于≤3限制)                       │
│     - created_at                                            │
│                                                             │
│  2. Projects (项目)                                         │
│     - project_id, name, description, created_by            │
│     - status (进行中/已完成/已取消)                          │
│     - created_at                                            │
│                                                             │
│  3. Modules (模块/任务)                                     │
│     - module_id, project_id, name, description             │
│     - acceptance_criteria (验收标准)                        │
│     - estimated_weeks, bounty                               │
│     - status (待接单/进行中/已关闭/已完成)                   │
│     - deadline, is_overdue                                  │
│     - created_at, updated_at                                │
│                                                             │
│  4. Module_Assignees (模块承接人)                           │
│     - id, module_id, user_id, assigned_at                  │
│     - score_share (分数分配比例)                             │
│                                                             │
│  5. Deliveries (交付记录)                                   │
│     - delivery_id, module_id, user_id, content             │
│     - attachments (交付物附件)                              │
│     - submitted_at, status (待验收/通过/不通过)              │
│                                                             │
│  6. Reviews (验收记录)                                      │
│     - review_id, delivery_id, reviewer_id                  │
│     - decision (通过/不通过/关闭)                           │
│     - feedback (整改意见)                                   │
│     - reviewed_at                                           │
│                                                             │
│  7. Knowledge_Items (知识条目)                              │
│     - item_id, name, type, file_url, file_size             │
│     - uploaded_by, created_at                               │
│                                                             │
│  8. Knowledge_Links (知识关联)                              │
│     - id, module_id, knowledge_item_id, linked_by          │
│     - linked_at                                             │
│                                                             │
│  9. Reputation_History (信誉分历史)                         │
│     - id, user_id, score_change, reason                    │
│     - changed_by, changed_at                                │
│                                                             │
│  10. Agent_Calls (智能体调用记录)                           │
│      - id, agent_id, caller_id, module_id                  │
│      - called_at                                             │
│                                                             │
│  11. Notifications (通知)                                   │
│      - id, user_id, type, content, is_read                 │
│      - created_at                                           │
│                                                             │
│  12. Module_Abandon_Requests (放弃任务申请)                 │
│      - id, module_id, user_id, reason                      │
│      - status (待审批/已批准/已拒绝), reviewed_at           │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

---

## 18. 技术架构

### 18.1 技术栈

| 层级 | 技术 |
|------|------|
| 前端 | React + Lingjing Core Brand System |
| 后端 | Python + FastAPI |
| ORM | SQLAlchemy |
| 数据库 | PostgreSQL |
| 智能体 | LangChain 生态 |
| 部署 | Docker + 腾讯轻量云 |

### 18.2 服务架构

| 方案 | 说明 |
|------|------|
| 服务拆分 | 单体应用（前后端分离，但部署在一起） |
| 容器编排 | 单机 Docker Compose |
| 文件存储 | 本地存储 |

### 18.3 Agent技术栈（未来实现）

| 技术 | 用途 |
|------|------|
| 模型 | DeepSeek V3.2 |
| RAG | 参考历史项目 |
| Function Calling | 结构化输出 |
| Skills | 能力复用 |
| MCP | 协议扩展 |

---

## 19. 非功能需求

### 19.1 性能要求

| 指标 | 目标值 |
|------|-------|
| 并发数 | 10 |

### 19.2 兼容性

| 项目 | 要求 |
|------|------|
| 浏览器支持 | Chrome常规版本 |

### 19.3 安全性

| 项目 | MVP阶段 |
|------|---------|
| 认证方式 | 用户名+密码 |
| 密码策略 | 无 |
| 数据加密 | 不需要 |
| 权限控制 | 不需要 |

### 19.4 监控/日志

| 功能 | MVP阶段 |
|------|---------|
| 系统状态监控 | ✅ |
| 用户操作日志 | ✅ |
| 系统错误日志 | ✅ |
| API调用日志 | ✅ |
| 日志轮转 | ✅ |

### 19.5 国际化

| 项目 | MVP阶段 |
|------|---------|
| 多语言支持 | ❌ 纯中文 |

### 19.6 数据导出

| 功能 | MVP阶段 |
|------|---------|
| 导出功能 | ❌ |

### 19.7 备份/恢复

| 功能 | MVP阶段 |
|------|---------|
| 数据备份 | ❌ |
| 数据恢复 | ❌ |

### 19.8 可扩展性

| 预留项 | 说明 |
|--------|------|
| Agent接口 | 为未来Agent功能预留扩展 |

---

## 20. MVP成功标准

| 指标 | 目标值 |
|------|-------|
| 端到端完成任务数 | 5个 |

---

## 21. 开发计划

### 21.1 开发模式

| 模式 | 说明 |
|------|------|
| 开发方法 | TDD + Vibe Coding |
| AI辅助 | Cursor + Claude 4.6 |

### 21.2 开发顺序

```
第1周：基础架构
├── 后端项目初始化（FastAPI + Docker）
├── 前端项目初始化（React + 设计系统）
├── 数据库设计与初始化
└── 用户系统

第2周：核心功能
├── 角色系统（指挥官/节点）
├── 项目管理
├── 模块管理
└── 模块承接（抢单）

第3周：执行流程
├── 交付物提交
├── 验收流程
├── 多人协作
├── 分数分配
└── 超时显示

第4周：周边功能
├── 信誉分系统
├── 排行榜
├── 知识库
└── 智能体相关（占位）
```

---

## 22. 待解决的关键风险

| 风险 | 说明 |
|------|------|
| 算法暴政 | 如何避免系统不断压缩工时？需引入熔断机制和人工申诉通道 |
| 任务拆解颗粒度 | AI拆解的任务如果太碎，管理成本可能高于生产成本 |
| 非量化工作评估 | 创意、审美、情感类工作很难用算法量化验收 |

---

## 23. 附录：功能状态汇总

| 功能模块 | MVP状态 | 备注 |
|---------|---------|------|
| 用户系统 | ✅ 实现 | 用户名+密码认证 |
| 角色系统 | ✅ 实现 | 指挥官/节点 |
| 项目管理 | ✅ 实现 | 指挥官创建 |
| 模块管理 | ✅ 实现 | 人工拆解 |
| 模块承接 | ✅ 实现 | 纯抢单 |
| 交付提交 | ✅ 实现 | md/zip |
| 验收流程 | ✅ 实现 | 指挥官决策 |
| 信誉分系统 | ✅ 实现 | 主观评分，排行榜 |
| 并发限制 | ✅ 实现 | ≤3任务 |
| 多人协作 | ✅ 实现 | ≤5人，指挥官分配分数 |
| 分数分配 | ✅ 实现 | 指挥官手动分配 |
| 超时显示 | ✅ 实现 | UI显性展示 |
| 任务放弃 | ✅ 实现 | 需审批 |
| 知识库 | ✅ 实现 | 上传/下载/删除，≤30MB |
| 知识关联 | ✅ 实现 | 手动选择关联 |
| 智能体发现 | ✅ 实现 | 浏览/搜索/推荐 |
| 智能体调用记录 | ✅ 实现 | 记录调用信息 |
| 贡献度积分 | ✅ 实现 | 按调用次数累积 |
| 排行榜 | ✅ 实现 | 信誉分展示 |
| 通知中心 | ✅ 实现 | 站内消息 |
| Agent辅助拆解 | ⬜ 占位 | UI保留，功能后续加 |
| 记录架构师决策 | ⬜ 占位 | 数据结构预留 |
| 对比建议 | ⬜ 占位 | 数据结构预留 |

---

*文档结束*
